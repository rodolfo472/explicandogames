<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IA Estudo Inteligente</title>
<style>
body { font-family: Arial; background:#121212; color:white; margin:0; }
header { background:#6a00ff; padding:15px; text-align:center; font-size:22px; }
.chat { height:70vh; overflow-y:auto; padding:15px; display:flex; flex-direction:column; gap:10px; }
.message { max-width:80%; padding:10px; border-radius:8px; }
.user { background:#00c3ff; align-self:flex-end; }
.bot { background:#333; align-self:flex-start; }
.input-area { position:fixed; bottom:0; width:100%; display:flex; gap:5px; padding:10px; background:#1c1c1c; }
input[type=text] { flex:1; padding:10px; border-radius:8px; border:none; }
button { padding:10px; border-radius:8px; border:none; cursor:pointer; }
.plus { background:#444; color:white; }
.study-btn { background:#00ff95; }
.send { background:#6a00ff; color:white; }
#studyMenu { display:none; position:fixed; bottom:60px; width:100%; background:#222; padding:10px; }
select { width:100%; padding:8px; }
</style>
</head>
<body>

<header>IA Estudo Inteligente ðŸ¤–ðŸ“š</header>

<div class="chat" id="chat"></div>

<div id="studyMenu">
    <select id="subject">
        <option value="">Escolha a matÃ©ria</option>
        <option value="matematica">MatemÃ¡tica</option>
        <option value="portugues">PortuguÃªs</option>
        <option value="historia">HistÃ³ria</option>
        <option value="ciencias">CiÃªncias</option>
        <option value="ingles">InglÃªs</option>
        <option value="geografia">Geografia</option>
    </select>
</div>

<div class="input-area">
    <button class="plus" onclick="anexar()">+</button>
    <button class="study-btn" onclick="abrirEstudo()">Estudar</button>
    <input type="text" id="pergunta" placeholder="Digite sua pergunta...">
    <button class="send" onclick="responder()">Enviar</button>
</div>

<script>
let materiaAtual = "";

function abrirEstudo() {
    const menu = document.getElementById("studyMenu");
    menu.style.display = menu.style.display==="none"?"block":"none";
}

document.getElementById("subject").addEventListener("change", function(){
    materiaAtual = this.value;
    adicionarMensagem("bot","Modo estudo ativado para: "+materiaAtual);
});

function anexar(){ alert("Aqui vocÃª poderÃ¡ enviar fotos e arquivos no futuro ðŸ“Ž"); }

function adicionarMensagem(tipo,texto){
    const chat = document.getElementById("chat");
    const div = document.createElement("div");
    div.classList.add("message",tipo);
    div.innerText = texto;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

async function responder(){
    const input = document.getElementById("pergunta");
    const texto = input.value;
    if(!texto) return;
    adicionarMensagem("user",texto);

    if(!materiaAtual){
        adicionarMensagem("bot","Escolha uma matÃ©ria no botÃ£o Estudar ðŸ“š");
        input.value="";
        return;
    }

    // âš¡ Aqui chamamos a API da OpenAI
    try{
        const resposta = await fetch("https://api.openai.com/v1/chat/completions",{
            method:"POST",
            headers:{
                "Content-Type":"application/json",
                "Authorization":"Bearer SEU_API_KEY_AQUI" // coloque sua API Key
            },
            body:JSON.stringify({
                model:"gpt-3.5-turbo",
                messages:[
                    {role:"system", content:"VocÃª Ã© um professor especialista em "+materiaAtual+" e responde detalhadamente e de forma clara."},
                    {role:"user", content:texto}
                ],
                max_tokens:600
            })
        });

        const data = await resposta.json();
        const reply = data.choices[0].message.content;
        adicionarMensagem("bot",reply);

    }catch(err){
        console.error(err);
        adicionarMensagem("bot","Erro ao consultar a IA. Tente novamente.");
    }

    input.value="";
}
</script>

</body>
</html>
